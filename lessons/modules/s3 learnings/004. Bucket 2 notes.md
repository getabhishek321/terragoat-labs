---

# S3 Object: `aws_s3_bucket_object.data_object`

##  Purpose

This resource uploads a **sensitive customer dataset** (`customer-master.xlsx`) into the previously defined **insecure, 
publicly accessible** `data` bucket.

This is designed to simulate a **high-impact data exposure scenario** where confidential files are placed into a misconfigured S3 bucket.

---

##  Terraform Definition (Simplified)

```hcl
resource "aws_s3_bucket_object" "data_object" {
  bucket = aws_s3_bucket.data.id
  key    = "customer-master.xlsx"
  source = "resources/customer-master.xlsx"
  tags   = merge(...)
}
```

---

##  Key Components Explained

### **1. `bucket = aws_s3_bucket.data.id`**

This ties the object to the insecure bucket defined earlier:

* The bucket is public
* Has **no encryption**, **no versioning**, **no logging**

Placing sensitive files here worsens all prior risks.

---

### **2. `key = "customer-master.xlsx"`**

This is the **object name** inside the bucket.

Example S3 path:

```
s3://<resource_prefix>-data/customer-master.xlsx
```

The name strongly implies:

* Contains **customer master records**
* Potentially PII (names, phone numbers, addresses, IDs, billing info, etc.)
* High-value target for attackers

---

### **3. `source = "resources/customer-master.xlsx"`**

Terraform will:

* Read this file from your local repo
* Upload it to AWS during `terraform apply`

This is important because it demonstrates:

* **IaC can introduce security risks beyond just configuration.**
  Sensitive data embedded in repositories â†’ later uploaded into insecure cloud resources.

---

### **4. Metadata Tags (Git/Yor)**

```hcl
tags = {
  git_commit = ...
  git_file   = "terraform/aws/s3.tf"
  yor_trace  = ...
}
```

These tags help:

* Trace *which commit* created/modified this object
* Enable **supply chain security** & IaC provenance tracking
* Quickly identify resources in cloud audits

---

##  Why This Is a High-Impact Misconfiguration

### **1. Sensitive data stored in a public S3 bucket**

If the bucket is public (as indicated in comments), then:

* Anyone on the internet can download this file
* Attackers actively scan AWS for misconfigured buckets
* This is the type of scenario seen in:

  * Verizon AWS breach
  * Dow Jones S3 exposure
  * WWE leak
  * FedEx breach

This resource **deliberately models such a breach**.

---

### **2. No server-side encryption**

The object inherits bucket-level settings:

* Data stored unencrypted (plaintext)
* Anyone with physical access (AWS staff) or misconfigured IAM could read it
* Violates every major compliance standard

---

### **3. No versioning**

If the file is:

* Overwritten
* Deleted
* Tampered

There is **no recovery**.

In real-world IR investigations, this is devastating because:

* Attackers often overwrite or corrupt data to hide tampering
* Versioning provides forensic evidence, this bucket has none

---

### **4. No access logging**

The file can be downloaded, exfiltrated, or corrupted and:

* **You will have no traceability**
* No evidence for SOC, DFIR, or compliance reporting
* Impossible to reconstruct blast radius

---

##  Complete Risk Summary

| Risk                               | Severity     | Explanation                                 |
| ---------------------------------- | ------------ | ------------------------------------------- |
| Public exposure of sensitive data  | **Critical** | Anyone can download `customer-master.xlsx`  |
| File stored without encryption     | High         | Violates compliance; data readable at-rest  |
| No forensic logging                | High         | No insight into downloads/access            |
| No versioning                      | Medium       | No rollback, recovery, or tamper visibility |
| Sensitive file committed into repo | High         | Supply chain leakage risk                   |

This single object placement demonstrates **how many real-world data breaches happen**, not through complex exploits, 
but through simple misconfigured storage.

---
